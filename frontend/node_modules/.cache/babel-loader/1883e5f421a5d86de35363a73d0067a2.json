{"ast":null,"code":"var _jsxFileName = \"/Users/deanerfree/projects/multistep/frontend/src/components/Form.js\";\nimport \"../App.css\";\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { CircularProgress } from \"@mui/material\";\nimport { Card, CardContent, Button, Box, ThemeProvider, makeStyles } from \"@material-ui/core\";\nimport { theme, root } from \"../styles/theme\";\nimport { Form, Formik } from \"formik\";\nimport { validation } from \"../Functions/validationSchema\";\nimport initialFormField from \"../model/initialFormModel\";\nimport formStepper from \"../Functions/formStepper\";\nimport FormResult from \"./FormResult\";\nconst useStyles = makeStyles(root);\nexport default function UserForm() {\n  const [activeStep, setActiveStep] = useState(0);\n  const [responseData, setResponseData] = useState([]);\n  const currentValidationSchema = validation[activeStep]; // const numVal = /[1-9][0-9]/\n\n  const classes = useStyles();\n\n  const _stepBack = () => {\n    if (activeStep === 0) return;\n    setActiveStep(activeStep - 1);\n  };\n\n  async function _submitForm(values, actions) {\n    values.email = values.email.toLowerCase();\n\n    if (values.age === \"\") {\n      values.age = 0;\n    }\n\n    axios.post(\"/api/create\", values).then(resp => {\n      if (resp.status === 200) {\n        setResponseData(resp);\n        setActiveStep(activeStep + 1);\n      }\n\n      if (resp.status === 400) {\n        setResponseData(resp);\n        setActiveStep(activeStep + 1);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n    actions.setSubmitting(false);\n  }\n\n  function _handleSubmit(values, actions) {\n    if (activeStep === 2) {\n      _submitForm(values, actions);\n    } else {\n      setActiveStep(activeStep + 1);\n      actions.setTouched({});\n      actions.setSubmitting(false);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(ThemeProvider, {\n    theme: theme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    className: \"wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, activeStep === 3 ? /*#__PURE__*/React.createElement(FormResult, {\n    props: {\n      responseData\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }) : /*#__PURE__*/React.createElement(Formik, {\n    initialValues: { ...initialFormField\n    },\n    validationSchema: currentValidationSchema,\n    onSubmit: _handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, ({\n    isSubmitting\n  }) => /*#__PURE__*/React.createElement(Form, {\n    autoComplete: \"off\",\n    className: \"formWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    className: \"formBody\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 10\n    }\n  }, formStepper(activeStep)), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 10\n    }\n  }, isSubmitting ? /*#__PURE__*/React.createElement(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 12\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buttonWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 12\n    }\n  }, activeStep === 0 ? null : /*#__PURE__*/React.createElement(Button, {\n    className: classes.root,\n    onClick: _stepBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 14\n    }\n  }, \"Back\"), /*#__PURE__*/React.createElement(Button, {\n    disabled: isSubmitting,\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"primary\",\n    style: {\n      height: 48,\n      width: 100\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 14\n    }\n  }, activeStep === 2 ? \"Submit\" : \"Next\"))))))));\n}","map":{"version":3,"sources":["/Users/deanerfree/projects/multistep/frontend/src/components/Form.js"],"names":["React","useState","axios","CircularProgress","Card","CardContent","Button","Box","ThemeProvider","makeStyles","theme","root","Form","Formik","validation","initialFormField","formStepper","FormResult","useStyles","UserForm","activeStep","setActiveStep","responseData","setResponseData","currentValidationSchema","classes","_stepBack","_submitForm","values","actions","email","toLowerCase","age","post","then","resp","status","catch","err","console","log","setSubmitting","_handleSubmit","setTouched","isSubmitting","height","width"],"mappings":"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","sourcesContent":["import \"../App.css\"\nimport React, { useState } from \"react\"\nimport axios from \"axios\"\nimport { CircularProgress } from \"@mui/material\"\nimport {\n\tCard,\n\tCardContent,\n\tButton,\n\tBox,\n\tThemeProvider,\n\tmakeStyles,\n} from \"@material-ui/core\"\n\nimport { theme, root } from \"../styles/theme\"\nimport { Form, Formik } from \"formik\"\nimport { validation } from \"../Functions/validationSchema\"\nimport initialFormField from \"../model/initialFormModel\"\nimport formStepper from \"../Functions/formStepper\"\nimport FormResult from \"./FormResult\"\nconst useStyles = makeStyles(root)\nexport default function UserForm() {\n\tconst [activeStep, setActiveStep] = useState(0)\n\tconst [responseData, setResponseData] = useState([])\n\tconst currentValidationSchema = validation[activeStep]\n\t// const numVal = /[1-9][0-9]/\n\tconst classes = useStyles()\n\tconst _stepBack = () => {\n\t\tif (activeStep === 0) return\n\t\tsetActiveStep(activeStep - 1)\n\t}\n\n\tasync function _submitForm(values, actions) {\n\t\tvalues.email = values.email.toLowerCase()\n\t\tif (values.age === \"\") {\n\t\t\tvalues.age = 0\n\t\t}\n\n\t\taxios\n\t\t\t.post(\"/api/create\", values)\n\t\t\t.then((resp) => {\n\t\t\t\tif (resp.status === 200) {\n\t\t\t\t\tsetResponseData(resp)\n\t\t\t\t\tsetActiveStep(activeStep + 1)\n\t\t\t\t}\n\t\t\t\tif (resp.status === 400) {\n\t\t\t\t\tsetResponseData(resp)\n\t\t\t\t\tsetActiveStep(activeStep + 1)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\n\t\tactions.setSubmitting(false)\n\t}\n\n\tfunction _handleSubmit(values, actions) {\n\t\tif (activeStep === 2) {\n\t\t\t_submitForm(values, actions)\n\t\t} else {\n\t\t\tsetActiveStep(activeStep + 1)\n\t\t\tactions.setTouched({})\n\t\t\tactions.setSubmitting(false)\n\t\t}\n\t}\n\treturn (\n\t\t<Card>\n\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t<CardContent className='wrapper'>\n\t\t\t\t\t{activeStep === 3 ? (\n\t\t\t\t\t\t<FormResult props={{ responseData }} />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Formik\n\t\t\t\t\t\t\tinitialValues={{ ...initialFormField }}\n\t\t\t\t\t\t\tvalidationSchema={currentValidationSchema}\n\t\t\t\t\t\t\tonSubmit={_handleSubmit}>\n\t\t\t\t\t\t\t{({ isSubmitting }) => (\n\t\t\t\t\t\t\t\t<Form autoComplete='off' className='formWrapper'>\n\t\t\t\t\t\t\t\t\t<Box className='formBody'>{formStepper(activeStep)}</Box>\n\t\t\t\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t\t\t\t{isSubmitting ? (\n\t\t\t\t\t\t\t\t\t\t\t<CircularProgress />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<div className='buttonWrapper'>\n\t\t\t\t\t\t\t\t\t\t\t\t{activeStep === 0 ? null : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button className={classes.root} onClick={_stepBack}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: 48, width: 100 }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{activeStep === 2 ? \"Submit\" : \"Next\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Formik>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</ThemeProvider>\n\t\t</Card>\n\t)\n}\n"]},"metadata":{},"sourceType":"module"}