{"ast":null,"code":"import _regeneratorRuntime from\"/Users/deanerfree/projects/multistep/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/deanerfree/projects/multistep/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/deanerfree/projects/multistep/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/deanerfree/projects/multistep/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"../App.css\";import React,{useState}from\"react\";import axios from\"axios\";import{CircularProgress}from\"@mui/material\";import{Card,CardContent,Button,Box,ThemeProvider,makeStyles}from\"@material-ui/core\";import{theme,root}from\"../styles/theme\";import{Form,Formik}from\"formik\";import{validation}from\"../Functions/validationSchema\";import initialFormField from\"../model/initialFormModel\";import formStepper from\"../Functions/formStepper\";import FormResult from\"./FormResult\";var useStyles=makeStyles(root);export default function UserForm(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),activeStep=_useState2[0],setActiveStep=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),responseData=_useState4[0],setResponseData=_useState4[1];var currentValidationSchema=validation[activeStep];// const numVal = /[1-9][0-9]/\nvar classes=useStyles();var _stepBack=function _stepBack(){if(activeStep===0)return;setActiveStep(activeStep-1);};function _submitForm(_x,_x2){return _submitForm2.apply(this,arguments);}function _submitForm2(){_submitForm2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,actions){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:values.email=values.email.toLowerCase();if(values.age===\"\"){values.age=0;}axios.post(\"/api/create\",values).then(function(resp){if(resp.status===200){setResponseData(resp);setActiveStep(activeStep+1);}}).catch(function(err){console.log(err);});actions.setSubmitting(false);case 4:case\"end\":return _context.stop();}}},_callee);}));return _submitForm2.apply(this,arguments);}function _handleSubmit(values,actions){if(activeStep===2){_submitForm(values,actions);}else{setActiveStep(activeStep+1);actions.setTouched({});actions.setSubmitting(false);}}return/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(ThemeProvider,{theme:theme},/*#__PURE__*/React.createElement(CardContent,{className:\"wrapper\"},activeStep===3?/*#__PURE__*/React.createElement(FormResult,{props:{responseData:responseData}}):/*#__PURE__*/React.createElement(Formik,{initialValues:_objectSpread({},initialFormField),validationSchema:currentValidationSchema,onSubmit:_handleSubmit},function(_ref){var isSubmitting=_ref.isSubmitting;return/*#__PURE__*/React.createElement(Form,{autoComplete:\"off\",className:\"formWrapper\"},/*#__PURE__*/React.createElement(Box,{className:\"formBody\"},formStepper(activeStep)),/*#__PURE__*/React.createElement(Box,null,isSubmitting?/*#__PURE__*/React.createElement(CircularProgress,null):/*#__PURE__*/React.createElement(\"div\",{className:\"buttonWrapper\"},activeStep===0?null:/*#__PURE__*/React.createElement(Button,{className:classes.root,onClick:_stepBack},\"Back\"),/*#__PURE__*/React.createElement(Button,{disabled:isSubmitting,type:\"submit\",variant:\"contained\",color:\"primary\",style:{height:48,width:100}},activeStep===2?\"Submit\":\"Next\"))));}))));}","map":{"version":3,"sources":["/Users/deanerfree/projects/multistep/frontend/src/components/Form.js"],"names":["React","useState","axios","CircularProgress","Card","CardContent","Button","Box","ThemeProvider","makeStyles","theme","root","Form","Formik","validation","initialFormField","formStepper","FormResult","useStyles","UserForm","activeStep","setActiveStep","responseData","setResponseData","currentValidationSchema","classes","_stepBack","_submitForm","values","actions","email","toLowerCase","age","post","then","resp","status","catch","err","console","log","setSubmitting","_handleSubmit","setTouched","isSubmitting","height","width"],"mappings":"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","sourcesContent":["import \"../App.css\"\nimport React, { useState } from \"react\"\nimport axios from \"axios\"\nimport { CircularProgress } from \"@mui/material\"\nimport {\n\tCard,\n\tCardContent,\n\tButton,\n\tBox,\n\tThemeProvider,\n\tmakeStyles,\n} from \"@material-ui/core\"\n\nimport { theme, root } from \"../styles/theme\"\nimport { Form, Formik } from \"formik\"\nimport { validation } from \"../Functions/validationSchema\"\nimport initialFormField from \"../model/initialFormModel\"\nimport formStepper from \"../Functions/formStepper\"\nimport FormResult from \"./FormResult\"\nconst useStyles = makeStyles(root)\nexport default function UserForm() {\n\tconst [activeStep, setActiveStep] = useState(0)\n\tconst [responseData, setResponseData] = useState([])\n\tconst currentValidationSchema = validation[activeStep]\n\t// const numVal = /[1-9][0-9]/\n\tconst classes = useStyles()\n\tconst _stepBack = () => {\n\t\tif (activeStep === 0) return\n\t\tsetActiveStep(activeStep - 1)\n\t}\n\n\tasync function _submitForm(values, actions) {\n\t\tvalues.email = values.email.toLowerCase()\n\t\tif (values.age === \"\") {\n\t\t\tvalues.age = 0\n\t\t}\n\n\t\taxios\n\t\t\t.post(\"/api/create\", values)\n\t\t\t.then((resp) => {\n\t\t\t\tif (resp.status === 200) {\n\t\t\t\t\tsetResponseData(resp)\n\t\t\t\t\tsetActiveStep(activeStep + 1)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\n\t\tactions.setSubmitting(false)\n\t}\n\n\tfunction _handleSubmit(values, actions) {\n\t\tif (activeStep === 2) {\n\t\t\t_submitForm(values, actions)\n\t\t} else {\n\t\t\tsetActiveStep(activeStep + 1)\n\t\t\tactions.setTouched({})\n\t\t\tactions.setSubmitting(false)\n\t\t}\n\t}\n\treturn (\n\t\t<Card>\n\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t<CardContent className='wrapper'>\n\t\t\t\t\t{activeStep === 3 ? (\n\t\t\t\t\t\t<FormResult props={{ responseData }} />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Formik\n\t\t\t\t\t\t\tinitialValues={{ ...initialFormField }}\n\t\t\t\t\t\t\tvalidationSchema={currentValidationSchema}\n\t\t\t\t\t\t\tonSubmit={_handleSubmit}>\n\t\t\t\t\t\t\t{({ isSubmitting }) => (\n\t\t\t\t\t\t\t\t<Form autoComplete='off' className='formWrapper'>\n\t\t\t\t\t\t\t\t\t<Box className='formBody'>{formStepper(activeStep)}</Box>\n\t\t\t\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t\t\t\t{isSubmitting ? (\n\t\t\t\t\t\t\t\t\t\t\t<CircularProgress />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<div className='buttonWrapper'>\n\t\t\t\t\t\t\t\t\t\t\t\t{activeStep === 0 ? null : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button className={classes.root} onClick={_stepBack}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: 48, width: 100 }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{activeStep === 2 ? \"Submit\" : \"Next\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Formik>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</ThemeProvider>\n\t\t</Card>\n\t)\n}\n"]},"metadata":{},"sourceType":"module"}