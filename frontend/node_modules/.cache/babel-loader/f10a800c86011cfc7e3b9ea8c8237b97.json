{"ast":null,"code":"var _jsxFileName = \"/Users/deanerfree/projects/multistep/frontend/src/components/Form.js\";\nimport \"../App.css\";\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { CircularProgress } from \"@mui/material\";\nimport { Card, CardContent, Button, Box } from \"@material-ui/core\";\nimport { Form, Formik } from \"formik\";\nimport { validation } from \"../Functions/validationSchema\";\nimport initialFormField from \"../model/initialFormModel\";\nimport formStepper from \"../Functions/formStepper\";\nimport FormSuccess from \"./FormSuccess\";\nexport default function UserForm() {\n  const [activeStep, setActiveStep] = useState(0);\n  const [responseData, setResponseData] = useState();\n  const currentValidationSchema = validation[activeStep]; // const numVal = /[1-9][0-9]/\n\n  const _stepBack = () => {\n    if (activeStep === 0) return;\n    setActiveStep(activeStep - 1);\n  };\n\n  function _sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  async function _submitForm(values, actions) {\n    const date = new Date();\n\n    if (values.age === \"\") {\n      values.age = 0;\n    } // values.createDate = date.toString()\n    // values.dateUpdated = date.toString()\n\n\n    console.log(values);\n    axios.post(\"/api/create\", values).then(resp => {\n      console.log(resp);\n\n      if (resp.status === 200) {\n        setResponseData(resp);\n        setActiveStep(activeStep + 1);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n    await _sleep(1000);\n    alert(JSON.stringify(values, null, 2));\n    actions.setSubmitting(false);\n  }\n\n  function _handleSubmit(values, actions) {\n    if (activeStep === 2) {\n      _submitForm(values, actions);\n    } else {\n      setActiveStep(activeStep + 1);\n      actions.setTouched({});\n      actions.setSubmitting(false);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    className: \"wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 4\n    }\n  }, activeStep === 3 ? /*#__PURE__*/React.createElement(FormSuccess, {\n    props: {\n      responseData\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 6\n    }\n  }) : /*#__PURE__*/React.createElement(Formik, {\n    initialValues: { ...initialFormField\n    },\n    validationSchema: currentValidationSchema,\n    onSubmit: _handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 6\n    }\n  }, ({\n    isSubmitting\n  }) => /*#__PURE__*/React.createElement(Form, {\n    autoComplete: \"off\",\n    className: \"formWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    className: \"formBody\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, formStepper(activeStep)), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, isSubmitting ? /*#__PURE__*/React.createElement(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buttonWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, activeStep === 0 ? null : /*#__PURE__*/React.createElement(Button, {\n    onClick: _stepBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, \"Back\"), /*#__PURE__*/React.createElement(Button, {\n    disabled: isSubmitting,\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, activeStep === 2 ? \"Submit\" : \"Next\")))))));\n}","map":{"version":3,"sources":["/Users/deanerfree/projects/multistep/frontend/src/components/Form.js"],"names":["React","useState","axios","CircularProgress","Card","CardContent","Button","Box","Form","Formik","validation","initialFormField","formStepper","FormSuccess","UserForm","activeStep","setActiveStep","responseData","setResponseData","currentValidationSchema","_stepBack","_sleep","ms","Promise","resolve","setTimeout","_submitForm","values","actions","date","Date","age","console","log","post","then","resp","status","catch","err","alert","JSON","stringify","setSubmitting","_handleSubmit","setTouched","isSubmitting"],"mappings":"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","sourcesContent":["import \"../App.css\"\nimport React, { useState } from \"react\"\nimport axios from \"axios\"\nimport { CircularProgress } from \"@mui/material\"\nimport { Card, CardContent, Button, Box } from \"@material-ui/core\"\nimport { Form, Formik } from \"formik\"\nimport { validation } from \"../Functions/validationSchema\"\nimport initialFormField from \"../model/initialFormModel\"\nimport formStepper from \"../Functions/formStepper\"\nimport FormSuccess from \"./FormSuccess\"\n\nexport default function UserForm() {\n\tconst [activeStep, setActiveStep] = useState(0)\n\tconst [responseData, setResponseData] = useState()\n\tconst currentValidationSchema = validation[activeStep]\n\t// const numVal = /[1-9][0-9]/\n\n\tconst _stepBack = () => {\n\t\tif (activeStep === 0) return\n\t\tsetActiveStep(activeStep - 1)\n\t}\n\n\tfunction _sleep(ms) {\n\t\treturn new Promise((resolve) => setTimeout(resolve, ms))\n\t}\n\n\tasync function _submitForm(values, actions) {\n\t\tconst date = new Date()\n\t\tif (values.age === \"\") {\n\t\t\tvalues.age = 0\n\t\t}\n\t\t// values.createDate = date.toString()\n\t\t// values.dateUpdated = date.toString()\n\t\tconsole.log(values)\n\t\taxios\n\t\t\t.post(\"/api/create\", values)\n\t\t\t.then((resp) => {\n\t\t\t\tconsole.log(resp)\n\t\t\t\tif (resp.status === 200) {\n\t\t\t\t\tsetResponseData(resp)\n\t\t\t\t\tsetActiveStep(activeStep + 1)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\tawait _sleep(1000)\n\t\talert(JSON.stringify(values, null, 2))\n\t\tactions.setSubmitting(false)\n\t}\n\n\tfunction _handleSubmit(values, actions) {\n\t\tif (activeStep === 2) {\n\t\t\t_submitForm(values, actions)\n\t\t} else {\n\t\t\tsetActiveStep(activeStep + 1)\n\t\t\tactions.setTouched({})\n\t\t\tactions.setSubmitting(false)\n\t\t}\n\t}\n\treturn (\n\t\t<Card>\n\t\t\t<CardContent className='wrapper'>\n\t\t\t\t{activeStep === 3 ? (\n\t\t\t\t\t<FormSuccess props={{ responseData }} />\n\t\t\t\t) : (\n\t\t\t\t\t<Formik\n\t\t\t\t\t\tinitialValues={{ ...initialFormField }}\n\t\t\t\t\t\tvalidationSchema={currentValidationSchema}\n\t\t\t\t\t\tonSubmit={_handleSubmit}>\n\t\t\t\t\t\t{({ isSubmitting }) => (\n\t\t\t\t\t\t\t<Form autoComplete='off' className='formWrapper'>\n\t\t\t\t\t\t\t\t<Box className='formBody'>{formStepper(activeStep)}</Box>\n\t\t\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t\t\t{isSubmitting ? (\n\t\t\t\t\t\t\t\t\t\t<CircularProgress />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<div className='buttonWrapper'>\n\t\t\t\t\t\t\t\t\t\t\t{activeStep === 0 ? null : (\n\t\t\t\t\t\t\t\t\t\t\t\t<Button onClick={_stepBack}>Back</Button>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='small'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{activeStep === 2 ? \"Submit\" : \"Next\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Formik>\n\t\t\t\t)}\n\t\t\t</CardContent>\n\t\t</Card>\n\t)\n}\n"]},"metadata":{},"sourceType":"module"}